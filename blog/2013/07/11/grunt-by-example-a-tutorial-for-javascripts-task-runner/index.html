<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><script src="//cdnjs.cloudflare.com/ajax/libs/wysihtml5/0.3.0/wysihtml5.min.js"></script><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html class="no-js" lang="en">
  <!--<![endif]-->

  <head>
    <meta charset="utf-8">



    <title>Grunt by Example - A Tutorial for JavaScript's Task Runner - Brian Chu</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <meta name="author" content="Brian Chu">
    <meta name="description" content="A Tutorial for JavaScript's Task Runner">




    <meta property="og:title" content="Grunt by Example - A Tutorial for JavaScript's Task Runner - Brian Chu">
    <meta property="og:site_name" content="I'm Brian Chu">
    <meta property="og:description" content="A Tutorial for JavaScript's Task Runner">
    <meta property="fb:profile_id" content="brian.chu">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Grunt by Example - A Tutorial for JavaScript's Task Runner - Brian Chu">

    <meta property="article:published_date" content="2013-07-11 16:35:00 -0700">
    <meta property="article:section" content="Blog">

    <meta property="article:tag" content="JavaScript">

    <meta property="article:tag" content="tutorial">




    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="brrrianchu">

    <meta name="twitter:title" content="Grunt by Example - A Tutorial for JavaScript's Task Runner">


    <meta name="twitter:description" content="What&rsquo;s Grunt used for? Automating front-end and JavaScript workflow tasks. Refreshing the browser when you change a script. Minifying and concatenating. Running tests. Think rake and guard, if &hellip;">



    <meta property="st:title" content="Grunt by Example - A Tutorial for JavaScript's Task Runner - Brian Chu">

    <meta property="st:published_at" content="2013-07-11T16:35:00-07:00">




    <link rel="canonical" href="http://www.brianchu.com/blog/2013/07/11/grunt-by-example-a-tutorial-for-javascripts-task-runner">
    <link href="/favicon.ico" rel="icon">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="apple-touch-icon-precomposed" href="apple-touch-icon.png">
    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,400italic' rel='stylesheet' type='text/css'>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet">


    <link href="/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom/custom.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href="/atom.xml" rel="alternate" title="I'm Brian Chu" type="application/atom+xml">

    <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-41298092-1']);
    _gaq.push(['_trackPageview']);
    (function()
    {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.defer = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
    </script>


  </head>

  <body>
    <!--[if lt IE 9]>
  <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->
    <div class="fixed-top alert text-center" style="display:none">
      <button type="button" class="close" data-dismiss="alert">&times;</button>
      <strong></strong>  <span></span>
    </div>
    <div class="container-fluid">
      <header class="row-fluid" role="banner">
        <section class="span4 profile-pic-container">
          <a href="/">
            <img src="http://www.brianchu.com/images/profile.png" title="Brian Chu" alt="Me" id="profile-pic">
          </a>
        </section>

        <section class="span8" role="banner">
          <h1 class="title">I'm <span class="nowrap">Brian Chu</span><span class="title-subdue">,</span>
          </h1>

          <span class="subtext">
      <h3 class="inline">a full-stack software engineer. <br class="break">I &hearts; JavaScript + iOS.</h3>
    </span>

        </section>
      </header>


      <div class="row-fluid content-row">


        <aside class="span4 side-bar clear-affix" data-spy="affix" data-offset-top="206"></aside>

        <aside class="span4 side-bar" data-spy="affix" data-offset-top="206">
          <div class="side-bar-responsive">

            <button class="menu-btn hide"><i class="icon-align-justify icon-large"></i>
            </button>
            <section role="navigation" class="well side-item side-nav">
              <ul class="nav nav-list">
                <li><a href="/" class="btn flat-btn icon icon-blog ">Blog</a></li>
                <li><a href="/about/" class="btn flat-btn icon icon-user ">About Me</a></li>
                <li><a href="/projects/" class="btn flat-btn icon icon-projects ">Projects</a></li>

                <li data-toggle="buttons-checkbox">
        <a class="btn flat-btn icon icon-contact" data-toggle="modal" data-target=".contact-modal.hide.fade">Contact Me</a>
    </li>
              </ul>
              <form class="nav-search">
                <a class="search-toggle"><i class="icon-search"></i></a>
                <div class="input-padding-wrapper">
                  <input type="text" id="st-search-input" class="span-12 st-search-input search-query" placeholder="Search">
                </div>
                <a class="close-search force-hide">Close</a>
              </form>
            </section>
            <section class="well side-item side-email clearfix side-nonresponsive">
              <p>I write posts occasionally. Leave your email here and I'll keep you updated!</p>

              <form action="http://brianchu.us7.list-manage1.com/subscribe/post?u=9711ca0ed3e46c42279302403&amp;id=7067371fb0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="subscribe-form" target="_blank">
                <input type="email" value="" name="EMAIL" class="span12 email defer-invalid" id="mce-EMAIL" placeholder="Email" required>
                <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn flat-btn flat-small pull-right well-adjust clearfix">
              </form>
            </section>


          </div>
        </aside>



        <section class="hentry span8 block" role="article">

          <article data-swiftype-index="true">

            <header class="page-header">


              <h2 class="entry-title">Grunt by Example -
                <br>A Tutorial for JavaScript's Task Runner</h2>


              <p class="meta">












                <time datetime="2013-07-11T16:35:00-07:00" pubdate data-updated="true">Jul 11<span>th</span>, 2013</time>

              </p>

            </header>


            <div class="article-body">
              <p>What&rsquo;s Grunt used for? Automating front-end and JavaScript workflow tasks. Refreshing the browser when you change a script. Minifying and concatenating. Running tests. Think <code>rake</code> and <code>guard</code>, if you&rsquo;re coming from the Ruby world.</p>

              <p>Enter Grunt by Example! A blow-by-blow tutorial. Just the way I like it. Let&rsquo;s dive in.</p>

              <!-- more -->


              <p>The catch &ndash; Grunt configuration files can be fairly convoluted at first glance, usually due to the fact that developers add more and more steps to their workflow over time.</p>

              <p>Grunt is just a task runner. Every unit of functionality that you would want is usually achieved with a separate npm package (a grunt &ldquo;plugin&rdquo;).</p>

              <p><code>npm search grunt</code> to view literally every grunt plugin available.</p>

              <p>Get the command line interface: <code>npm install -g grunt-cli</code>
              </p>

              <p>Add the actual grunt task runner as a development dependency to your project (<code>--save-dev</code> adds the package as a dependency to <code>package.json</code>):
                <code>npm install --save-dev grunt</code>
              </p>

              <p>Let&rsquo;s follow a process of gradual expansion.</p>

              <p>Create an empty <code>Gruntfile.js</code> file in your project root. This will contain all of your task configuration.</p>

              <p>Let&rsquo;s say that the first task we want to add to our workflow is to be able to concatenate several JavaScript files into one. Let&rsquo;s say those files are all in the <code>scripts/</code> sub-directory. We&rsquo;d want to do this before deploying a website, for example.</p>

              <p>Run <code>npm install --save-dev grunt-contrib-concat</code>.</p>

              <p>Let&rsquo;s look at our Gruntfile configured with just this one task.</p>

              <p>A quick preview of the result before we look at the code. After setting up our configuration object, running <code>grunt concat</code>, <code>grunt concat:dist</code>, or <code>grunt build</code> in the shell in the project root will all do the same thing: concatenate all scripts in the <code>scripts</code> sub-directory into a single script called <code>main.js</code>.</p>

              <figure class='code'>
                <figcaption><span></span>
                </figcaption>
                <div class="highlight">
                  <table>
                    <tr>
                      <td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre>
                      </td>
                      <td class='code'><pre><code class='javascript'><span class='line'><span class="c1">//Grunt is just JavaScript running in node, after all...</span>
</span><span class='line'><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">grunt</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// All upfront config goes in a massive nested object.</span>
</span><span class='line'>  <span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>    <span class="c1">// You can set arbitrary key-value pairs.</span>
</span><span class='line'>    <span class="nx">distFolder</span><span class="o">:</span> <span class="s1">&#39;dist&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="c1">// You can also set the value of a key as parsed JSON.</span>
</span><span class='line'>    <span class="c1">// Allows us to reference properties we declared in package.json.</span>
</span><span class='line'>    <span class="nx">pkg</span><span class="o">:</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">readJSON</span><span class="p">(</span><span class="s1">&#39;package.json&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="c1">// Grunt tasks are associated with specific properties.</span>
</span><span class='line'>    <span class="c1">// these names generally match their npm package name.</span>
</span><span class='line'>    <span class="nx">concat</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// Specify some options, usually specific to each plugin.</span>
</span><span class='line'>      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// Specifies string to be inserted between concatenated files.</span>
</span><span class='line'>        <span class="nx">separator</span><span class="o">:</span> <span class="s1">&#39;;&#39;</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="c1">// &#39;dist&#39; is what is called a &quot;target.&quot;</span>
</span><span class='line'>      <span class="c1">// It&#39;s a way of specifying different sub-tasks or modes.</span>
</span><span class='line'>      <span class="nx">dist</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// The files to concatenate:</span>
</span><span class='line'>        <span class="c1">// Notice the wildcard, which is automatically expanded.</span>
</span><span class='line'>        <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;scripts/*.js&#39;</span><span class="p">],</span>
</span><span class='line'>        <span class="c1">// The destination file:</span>
</span><span class='line'>        <span class="c1">// Notice the angle-bracketed ERB-like templating,</span>
</span><span class='line'>        <span class="c1">// which allows you to reference other properties.</span>
</span><span class='line'>        <span class="c1">// This is equivalent to &#39;dist/main.js&#39;.</span>
</span><span class='line'>        <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;&lt;%= distFolder %&gt;/main.js&#39;</span>
</span><span class='line'>        <span class="c1">// You can reference any grunt config property you want.</span>
</span><span class='line'>        <span class="c1">// Ex: &#39;&lt;%= concat.options.separator %&gt;&#39; instead of &#39;;&#39;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span> <span class="c1">// The end of grunt.initConfig</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// We&#39;ve set up each task&#39;s configuration.</span>
</span><span class='line'>  <span class="c1">// Now actually load the tasks.</span>
</span><span class='line'>  <span class="c1">// This will do a lookup similar to node&#39;s require() function.</span>
</span><span class='line'>  <span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-concat&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Register our own custom task alias.</span>
</span><span class='line'>  <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;concat&#39;</span><span class="p">]);</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre>
                      </td>
                    </tr>
                  </table>
                </div>
              </figure>


              <p>You might still be confused about the notion of a &ldquo;target.&rdquo; More on that:</p>

              <p>Let&rsquo;s say there&rsquo;s another set of files you want to concatenate. All script files in <code>deploy/</code> should be concatenated into <code>deploy.js</code> (in the project root). Let&rsquo;s say we want that task to look like <code>grunt concat:deploy</code>
              </p>

              <p>To achieve that, our concat task now looks like:</p>

              <figure class='code'>
                <figcaption><span></span>
                </figcaption>
                <div class="highlight">
                  <table>
                    <tr>
                      <td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre>
                      </td>
                      <td class='code'><pre><code class='javascript'><span class='line'><span class="nx">concat</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">separator</span><span class="o">:</span> <span class="s1">&#39;;&#39;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nx">dist</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;scripts/*.js&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;&lt;%= distFolder %&gt;/main.js&#39;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nx">deploy</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// options that are specific to the &#39;deploy&#39; target</span>
</span><span class='line'>    <span class="c1">// target-level options override task-level options</span>
</span><span class='line'>    <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// separator:&#39;;;;&#39; would override the parent setting</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">src</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;deploy/*.js&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="nx">dest</span><span class="o">:</span><span class="s1">&#39;deploy.js&#39;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre>
                      </td>
                    </tr>
                  </table>
                </div>
              </figure>


              <p>If you run <code>grunt concat:dist,</code> all scripts in <code>scripts/</code> will be concatenated into <code>dist/main.js</code>. <code>grunt concat:dist</code> runs the concat task with the config settings that are specified under <code>dist</code>. <code>grunt concat:deploy</code> runs the concat task with the config settings specified under <code>deploy</code>. <code>grunt concat</code> will run concat with <em>both</em> targets, separately. The parent-level <code>options</code> setting specifies config settings that are shared by both targets. <code>grunt build</code> is an alias for <code>grunt concat</code>.</p>

              <p>Now let&rsquo;s tackle a common, yet relatively complicated task.</p>

              <p>Let&rsquo;s get Grunt to run certain tasks in response to changes in files. An extremely powerful and common use-case: reloading a static website when you change its HTML/CSS/JS. It&rsquo;s fairly complicated and it&rsquo;s usually something you just copy-and-paste. Here are the steps to setting this up using the <code>watch</code> and <code>connect</code> plugins, along with the <code>connect-livereload</code> (a piece of Connect middleware that is not grunt-specific). For this example, let&rsquo;s assume that your static website is located in the <code>client/</code> folder.</p>

              <p>Install the three plugins:
                <br/>
                <code>npm install --save-dev grunt-contrib-watch grunt-contrib-connect connect-livereload</code>
              </p>

              <p>Add this basic initialization code to the top of your Gruntfile:</p>

              <figure class='code'>
                <figcaption><span></span>
                </figcaption>
                <div class="highlight">
                  <table>
                    <tr>
                      <td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre>
                      </td>
                      <td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// This is the default port that livereload listens on;</span>
</span><span class='line'><span class="c1">// change it if you configure livereload to use another port.</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">LIVERELOAD_PORT</span> <span class="o">=</span> <span class="mi">35729</span><span class="p">;</span>
</span><span class='line'><span class="c1">// lrSnippet is just a function.</span>
</span><span class='line'><span class="c1">// It&#39;s a piece of Connect middleware that injects</span>
</span><span class='line'><span class="c1">// a script into the static served html.</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">lrSnippet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;connect-livereload&#39;</span><span class="p">)({</span> <span class="nx">port</span><span class="o">:</span> <span class="nx">LIVERELOAD_PORT</span> <span class="p">});</span>
</span><span class='line'><span class="c1">// All the middleware necessary to serve static files.</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">livereloadMiddleware</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">connect</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">[</span>
</span><span class='line'>    <span class="c1">// Inject a livereloading script into static files.</span>
</span><span class='line'>    <span class="nx">lrSnippet</span><span class="p">,</span>
</span><span class='line'>    <span class="c1">// Serve static files.</span>
</span><span class='line'>    <span class="nx">connect</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">base</span><span class="p">),</span>
</span><span class='line'>    <span class="c1">// Make empty directories browsable.</span>
</span><span class='line'>    <span class="nx">connect</span><span class="p">.</span><span class="nx">directory</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">base</span><span class="p">)</span>
</span><span class='line'>  <span class="p">];</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre>
                      </td>
                    </tr>
                  </table>
                </div>
              </figure>


              <p>Add to your grunt.initConfig object the following two tasks configurations:</p>

              <figure class='code'>
                <figcaption><span></span>
                </figcaption>
                <div class="highlight">
                  <table>
                    <tr>
                      <td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre>
                      </td>
                      <td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// The connect task is used to serve static files with a local server.</span>
</span><span class='line'><span class="nx">connect</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">client</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// The server&#39;s port, and the folder to serve from:</span>
</span><span class='line'>      <span class="c1">// Ex: &#39;localhost:9000&#39; would serve up &#39;client/index.html&#39;</span>
</span><span class='line'>      <span class="nx">port</span><span class="o">:</span> <span class="mi">9000</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">base</span><span class="o">:</span><span class="s1">&#39;client&#39;</span>
</span><span class='line'>      <span class="c1">// Custom middleware for the HTTP server:</span>
</span><span class='line'>      <span class="c1">// The injected JavaScript reloads the page.</span>
</span><span class='line'>      <span class="nx">middleware</span><span class="o">:</span> <span class="nx">livereloadMiddleware</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="c1">// The watch task is used to run tasks in response to file changes</span>
</span><span class='line'><span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">client</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// &#39;**&#39; is used to include all subdirectories</span>
</span><span class='line'>    <span class="c1">// and subdirectories of subdirectories, and so on, recursively.</span>
</span><span class='line'>    <span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;client/**/*&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="c1">// In our case, we don&#39;t configure any additional tasks,</span>
</span><span class='line'>    <span class="c1">// since livereload is built into the watch task,</span>
</span><span class='line'>    <span class="c1">// and since the browser refresh is handled by the snippet.</span>
</span><span class='line'>    <span class="c1">// Any other tasks to run (e.g. compile CoffeeScript) go here:</span>
</span><span class='line'>    <span class="nx">tasks</span><span class="o">:</span><span class="p">[],</span>
</span><span class='line'>    <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">livereload</span><span class="o">:</span><span class="nx">LIVERELOAD_PORT</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre>
                      </td>
                    </tr>
                  </table>
                </div>
              </figure>


              <p>Finally, we need to run the <code>connect</code> and <code>watch</code> tasks in sequence. To save ourselves from having to type in two shell commands, we can register a task alias:</p>

              <figure class='code'>
                <figcaption><span></span>
                </figcaption>
                <div class="highlight">
                  <table>
                    <tr>
                      <td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre>
                      </td>
                      <td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;preview&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;connect:client&#39;</span><span class="p">,</span><span class="s1">&#39;watch:client&#39;</span><span class="p">]);</span>
</span></code></pre>
                      </td>
                    </tr>
                  </table>
                </div>
              </figure>


              <p>Running <code>grunt preview</code> will now run both tasks.</p>

              <p>Some more grunt plugins to be aware about (<code>contrib</code> plugins are officially maintained):</p>

              <ul>
                <li><code>grunt-contrib-uglify</code> for minifying your JS files. It works similarly to <code>grunt-contrib-concat</code>.</li>
                <li><code>grunt-contrib-jshint</code> for running JSHint.</li>
                <li><code>grunt contrib-coffee</code> for compiling CoffeeScript.</li>
                <li><code>grunt-contrib-sass</code> for compiling SASS.</li>
                <li><code>grunt-concurrent</code> for running tasks concurrently (instead of sequentially) &ndash; useful if you want to run multiple watch tasks concurrently.

<ul>
<li>If you have a series of tasks, the <code>watch</code> task must be run last. <code>watch</code> is a task that never ends until you terminate it. Thus, Grunt won&rsquo;t ever reach tasks that come after <code>watch</code>.</li>
              </ul>
              </li>
              <li><code>grunt-nodemon</code> for running <a href="https://github.com/remy/nodemon">nodemon</a> with your node app. This runs your node app and reloads it when files change.</li>
              <li><code>grunt-simplemocha</code> for running mocha tests.</li>
              <li><code>grunt-open</code> for opening files and URLs.</li>
              </ul>


              <p>Some tips:</p>

              <ol>
                <li>If your Gruntfile starts getting too unwieldy, you can break it up by using <code>grunt.file.readJSON()</code>.</li>
                <li>Tired of copying and pasting <code>loadNpmTasks</code>?  Try this:

<ul>
<li><code>npm install --save-dev matchdep</code></li>
                <li>use <code>require('matchdep').filterDev('grunt-*').forEach(grunt.loadNpmTasks);</code> where you would otherwise list out all your multiple <code>grunt.loadNpmTask</code> calls.</li>
                </ul>
                </li>
              </ol>


              <p>For more advanced concepts, <a href="http://gruntjs.com/getting-started">read the Grunt docs!</a> They&rsquo;re pretty good.</p>
            </div>

          </article>

          <footer>
            <p class="meta subtext">



              <span class="byline author vcard">Posted by <span class="fn">Brian Chu</span></span>













              <time datetime="2013-07-11T16:35:00-07:00" pubdate data-updated="true">Jul 11<span>th</span>, 2013</time>


              <span class="categories">
  
    <a class='category' href='/blog/categories/javascript/'>JavaScript</a>, <a class='category' href='/blog/categories/tutorial/'>tutorial</a>
  
</span>


            </p>
            <ul class="pager">

              <li class="next"><a class="basic-alignment right" href="/blog/2013/08/14/a-little-thing-with-versions/"
        title="Next Post: A Little Note on Versions">A Little Note on Versions
        &raquo;</a></li>


              <li class="archives"><a href="/blog/archives">Blog Archives</a></li>
            </ul>




            <div class="bottom-asides">
              <section class="well side-item side-email side-responsive">
                <p>I write posts occasionally. Leave your email here and I'll keep you updated!</p>

                <form action="http://brianchu.us7.list-manage1.com/subscribe/post?u=9711ca0ed3e46c42279302403&amp;id=7067371fb0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="subscribe-form" target="_blank">
                  <input type="email" value="" name="EMAIL" class="span12 email defer-invalid" id="mce-EMAIL" placeholder="Email" required>
                  <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn flat-btn flat-small pull-right well-adjust clearfix">
                </form>
              </section>

            </div>




            <div class="sharing">

              <a href="//twitter.com/share" class="twitter-share-button" data-url="http://www.brianchu.com/blog/2013/07/11/grunt-by-example-a-tutorial-for-javascripts-task-runner/" data-via="brrrianchu" data-counturl="http://www.brianchu.com/blog/2013/07/11/grunt-by-example-a-tutorial-for-javascripts-task-runner/">Tweet</a>



              <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>

            </div>



            <section>
              <h2>Comments</h2>
              <div id="disqus_thread" aria-live="polite">
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
                </noscript>
              </div>
            </section>

          </footer>
        </section>

      </div>

      <footer role="contentinfo" class="row-fluid content-row end-footer">
        <!-- <ul class="span4"></ul> -->
        <ul class="span12 inline">
          <li><a href="/blog/archives">Blog</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="/projects/">Projects</a></li>
          <li><a href="https://github.com/bchu"><i class="icon-github-sign"></i> bchu</a></li>
          <li><a href="https://twitter.com/brrrianchu"><i class="icon-twitter-sign"/></i> @brrrianchu</a></li>
          <li><a href="http://www.linkedin.com/in/brchu"><i class="icon-linkedin-sign icon-large"/></i></a></li>

          <li><a href="https://plus.google.com/115101039553139400331?rel=author"><i class="icon-google-plus-sign icon-large"/></i></a></li>

          <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"><i class="icon-rss icon-large"></i></a></li>
        </ul>
      </footer>




      <div class="modal hide fade contact-modal" tabindex="-1" role="dialog" aria-labelledby="modalHeader" aria-hidden="true">

        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h3 id="modalHeader">Contact Me</h3>
        </div>

        <iframe src="about:blank" id="contact-form-frame" name="contact-form-frame" style="display: none;"></iframe>
        <form action="https://docs.google.com/a/brianchu.com/forms/d/19H0X9cpiviJdxyqZRcAcQGsZAtbNOzOuGn3wiOx3UbM/formResponse" method="POST" target="contact-form-frame">

          <div class="modal-body">
            <label class="control-label" for="entry_562979872">Name:</label>
            <input class="fullspan" type="text" name="entry.562979872" value="" id="entry_562979872" dir="auto">

            <label class="control-label" for="entry_1424764388">Email (for my reply):</label>
            <input class="fullspan defer-invalid" type="email" name="entry.1424764388" value="" id="entry_1424764388" dir="auto" placeholder="Required" aria-required="true" required>

            <label class="control-label" for="entry_1142668288">Message:</label>
            <textarea class="fullspan defer-invalid" name="entry.1142668288" rows="5" cols="0" id="entry_1142668288" dir="auto" placeholder="Required" aria-required="true" required></textarea>
            <label class="checkbox contact-checkbox">
              <input type="checkbox" name="entry.497122630" value="Yes" id="group_497122630_1">Sign up for email updates?
            </label>
            <input type="hidden" name="draftResponse" value="[]">
            <input type="hidden" name="pageHistory" value="0">
          </div>

          <div class="modal-footer">
            <input type="submit" name="submit" value="Send" class="btn flat-btn flat-small well-adjust">
          </div>
        </form>

      </div>

    </div>


    <script>
    var disqus_shortname = 'brianchu';
     // var disqus_developer = 1;
    var disqus_identifier = 'http://www.brianchu.com/blog/2013/07/11/grunt-by-example-a-tutorial-for-javascripts-task-runner/';
    var disqus_url = 'http://www.brianchu.com/blog/2013/07/11/grunt-by-example-a-tutorial-for-javascripts-task-runner/';
    var disqus_script = 'embed.js';
    (function()
    {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.defer = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
    </script>



    <div id="fb-root"></div>
    <script>
    (function(d, s, id)
    {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id))
      {
        return;
      }
      js = d.createElement(s);
      js.id = id;
      js.async = true;
      js.defer = true;
      js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    </script>





    <script>
    (function()
    {
      var twitterWidgets = document.createElement('script');
      twitterWidgets.async = true;
      twitterWidgets.defer = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
    </script>



    <div id="st-results-container"></div>
    <script>
    var Swiftype = window.Swiftype ||
    {};
    (function()
    {
      Swiftype.key = '5J3i1dwgBx7wrJPqyp31';
      Swiftype.inputElement = '#st-search-input';
      Swiftype.resultContainingElement = '#st-results-container';
      Swiftype.attachElement = '#st-search-input';
      Swiftype.renderStyle = 'overlay';
    }());
    </script>
    <script src="//swiftype.com/embed.js" async defer></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <script src="/javascripts/libs.js"></script>
    <script src="/javascripts/custom.js"></script>


    <!--[if lte IE 9]>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-placeholder/2.0.7/jquery.placeholder.min.js"></script>
<![endif]-->



  </body>

</html>
